{% include base_path %}

<!-- start custom head snippets -->

<!-- Support for Academicons -->
<link rel="stylesheet" href="{{ base_path }}/assets/css/academicons.css"/>

<!-- favicon from https://commons.wikimedia.org/wiki/File:OOjs_UI_icon_academic-progressive.svg -->
<link rel="apple-touch-icon" sizes="180x180" href="{{ base_path }}/images/apple-touch-icon-180x180.png"/>
<link rel="icon" type="image/svg+xml" href="{{ base_path }}/images/favicon.svg"/>
<link rel="icon" type="image/png" href="{{ base_path }}/images/favicon-32x32.png" sizes="32x32"/>
<link rel="icon" type="image/png" href="{{ base_path }}/images/favicon-192x192.png" sizes="192x192"/>
<link rel="manifest" href="{{ base_path }}/images/manifest.json"/>
<link rel="icon" href="/images/favicon.ico"/>
<meta name="theme-color" content="#ffffff"/>
<link rel="stylesheet" href="{{ '/assets/css/custom.css' | relative_url }}">
<script>
function addTargetBlankToLinks() {
  // Target all external links
  const externalLinks = document.querySelectorAll('a[href^="http"], a[href^="https"]');
  
  externalLinks.forEach(function(link) {
    if (link.hostname !== window.location.hostname && !link.hasAttribute('target')) {
      link.setAttribute('target', '_blank');
      link.setAttribute('rel', 'noopener noreferrer');
    }
  });
  
  // Target PDF links
  const pdfLinks = document.querySelectorAll('a[href$=".pdf"], a[href*=".pdf"]');
  pdfLinks.forEach(function(link) {
    if (!link.hasAttribute('target')) {
      link.setAttribute('target', '_blank');
      link.setAttribute('rel', 'noopener noreferrer');
    }
  });
  
  // Target specific academic sites
  const academicLinks = document.querySelectorAll(
    'a[href*="aeaweb.org"], ' +
    'a[href*="sciencedirect.com"], ' +
    'a[href*="ssrn.com"], ' +
    'a[href*="arxiv.org"], ' +
    'a[href*="nber.org"], ' +
    'a[href*="github.com"]'
  );
  
  academicLinks.forEach(function(link) {
    if (!link.hasAttribute('target')) {
      link.setAttribute('target', '_blank');
      link.setAttribute('rel', 'noopener noreferrer');
    }
  });
}

// Try multiple events to ensure we catch everything
document.addEventListener('DOMContentLoaded', addTargetBlankToLinks);
window.addEventListener('load', addTargetBlankToLinks);

// Also run after a delay
setTimeout(addTargetBlankToLinks, 2000);
</script>

<!-- end custom head snippets -->
